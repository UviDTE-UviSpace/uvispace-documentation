<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The uvirobot package &#8212; UviSpace 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="UviSpace 1.0.0 documentation" href="index.html" />
    <link rel="next" title="The uvisensor package" href="uvisensor.html" />
    <link rel="prev" title="Getting Started" href="Starting.html" /> 
  </head>
  <body role="document">
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">UviSpace 1.0.0 documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="Starting.html" title="Getting Started"
             accesskey="P">previous</a> |
          <a href="uvisensor.html" title="The uvisensor package"
             accesskey="N">next</a> |
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-uvirobot-package">
<h1>The uvirobot package<a class="headerlink" href="#the-uvirobot-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-uvirobot.messenger">
<span id="messenger-py"></span><h2>messenger.py<a class="headerlink" href="#module-uvirobot.messenger" title="Permalink to this headline">¶</a></h2>
<p>This module &#8216;listens&#8217; to speed SPs and sends them through serial port.</p>
<p><strong>Usage: messenger.py [-r &lt;robot_id&gt;], [&#8211;robotid=&lt;robot_id&gt;]</strong></p>
<p>To communicate with the external slaves, the data has to be packed using 
a prearranged protocol, in order to be unpacked and understanded 
correctly by the slave.</p>
<p>If it is run as main script, it creates an instance of the class 
<em>SerMesProtocol</em> for managing the serial port. T</p>
<p>When a new speed SP is received, it is sent to the target UGV using the 
instanced object.</p>
<div class="section" id="speed-formatting">
<h3>Speed formatting<a class="headerlink" href="#speed-formatting" title="Permalink to this headline">¶</a></h3>
<p>The <em>move_robot</em> function has the default speed limit set to [89-165]. 
These limits are needed when the robot is connected to a DC source with 
a small intensity limit.
If the program is run when the UGV is powered through a USB-B cable, it 
will move slowly, as the limit is too small to be able to move properly.</p>
<p>When the execution ends, the <em>plotter</em> module is called and the time 
delays values are plotted on a graph.</p>
</div>
</div>
<div class="section" id="module-uvirobot.controller">
<span id="controller-py"></span><h2>controller.py<a class="headerlink" href="#module-uvirobot.controller" title="Permalink to this headline">¶</a></h2>
<p>Routine for getting UGV poses and publishing to speed topic</p>
<p>The module instantiates a RobotController object and uses its methods
for publishing new speed set points in the topic &#8216;/robot_{}/cmd_vel&#8217;.</p>
<p>When calling the module, one argument must be passed, representing the 
id of the desired robot. It must be the same as the one passed to the
messenger.py module.</p>
</div>
<div class="section" id="module-uvirobot.plotter">
<span id="plotter-py"></span><h2>plotter.py<a class="headerlink" href="#module-uvirobot.plotter" title="Permalink to this headline">¶</a></h2>
<p>This module provides utilities for easily drawing plots.</p>
<p>It has 3 functions:</p>
<ul class="simple">
<li><em>format_plotting</em>: sets the configuration parameters of the plots, in 
order to use a common format for all the plots.</li>
<li><em>path_plot</em>: draws 2 plots in the same graph, representing the ideal 
path of an UGV and the real route it follows. The X and Y axes 
represent the 2-D coordinates of the working real space.</li>
<li><em>times_plot</em>: Draws the time delays during execution. It is intended 
to draw 2 plots, one representing the communication delays with the 
slave, and the other repesenting the waiting times for other modules 
of the project to give required updates of the speed values.</li>
</ul>
</div>
<div class="section" id="module-uvirobot.robot">
<span id="robot-py"></span><h2>robot.py<a class="headerlink" href="#module-uvirobot.robot" title="Permalink to this headline">¶</a></h2>
<p>This module communicates with user and sensors for finding paths.</p>
<p>It contains a class, <em>RobotController</em>, that represents a real UGV, and 
contains ROS functionalities for publishing new speed values, UGV&#8217;s 
attributes, such as the <em>robot_id</em>, its speed values, or an instance 
of the <em>PathTracker</em>, for calculating and storing the robot navigation 
values.</p>
<hr class="docutils" />
<dl class="class">
<dt id="uvirobot.robot.RobotController">
<em class="property">class </em><code class="descclassname">uvirobot.robot.</code><code class="descname">RobotController</code><span class="sig-paren">(</span><em>robot_id=1</em><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.robot.RobotController" title="Permalink to this definition">¶</a></dt>
<dd><p>This class contains methods needed to control a robot&#8217;s behavior.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>robot_id</strong> (<em>int</em>) &#8211; Identifier of the robot</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="uvirobot.robot.RobotController.new_goal">
<code class="descname">new_goal</code><span class="sig-paren">(</span><em>goal</em><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.robot.RobotController.new_goal" title="Permalink to this definition">¶</a></dt>
<dd><p>Receives a new goal and calculates the path to reach it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>goal</strong> (<em>geometry_msgs.Pose2D
Variable that</em>) &#8211; contains a 2-D position, with 2 cartesian 
values (x,y) and an angle value (theta).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="uvirobot.robot.RobotController.on_shutdown">
<code class="descname">on_shutdown</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.robot.RobotController.on_shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Shutdown method. Is called when execution is aborted.</p>
</dd></dl>

<dl class="method">
<dt id="uvirobot.robot.RobotController.set_speed">
<code class="descname">set_speed</code><span class="sig-paren">(</span><em>pose</em><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.robot.RobotController.set_speed" title="Permalink to this definition">¶</a></dt>
<dd><p>Receives a new pose and calculates the UGV speeds.</p>
<p>After calculating the new speed value, it is published on the 
rostopic <em>&#8216;/robot_X/cmd_vel&#8217;</em> using the <em>pub_vel</em> object.</p>
<p>Only the values X, Y and theta of the <em>Pose2D</em> type are used, as 
the designed Space consists in a 2-D flat space.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pose</strong> (<em>gemoetry_msgs.Pose2D</em>) &#8211; contains a 2-D position, with 2 cartesian values 
(x,y) and an angle value (theta).</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-uvirobot.serialcomm">
<span id="serialcomm-py"></span><h2>serialcomm.py<a class="headerlink" href="#module-uvirobot.serialcomm" title="Permalink to this headline">¶</a></h2>
<p>This module contains the class SerMesProtocol().</p>
<p>The aim is to provide a set of methods for performing communication 
operations with an external device, using a pair of XBee modules
(IEEE 802.15.4 protocol). Needless to say, the modules have to be 
previously configured for being able to communicate with each other, and
that task is out of the scope of this module.</p>
<p>The aforementioned class&#8217; methods build up messages following a common 
structure, that will be correctly interpreted by a slave with the same
implemented protocol.</p>
<p>Moreover, it offers methods specific to the UGV operation, as the <em>move</em>
method, that takes a speeds setpoint input and sends it correctly 
formatted to the slave.</p>
<hr class="docutils" />
<dl class="class">
<dt id="uvirobot.serialcomm.SerMesProtocol">
<em class="property">class </em><code class="descclassname">uvirobot.serialcomm.</code><code class="descname">SerMesProtocol</code><span class="sig-paren">(</span><em>port</em>, <em>baudrate</em>, <em>stopbits=1</em>, <em>parity='N'</em>, <em>timeout=0.5</em><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.serialcomm.SerMesProtocol" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a child of PySerial class and implements a comm. protocol</p>
<p>This class implements a message-based protocol over the serial port
in Master-slave mode: The master (PC) starts communication with 
the slave(peripheral) sending a message. The slave process the 
message and returns an answer.</p>
<p>The class uses the serial port to implement this protocol.
In master-slave data from the device is simply passed as return from 
a function that exist for every command implemented.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>port</strong> (<em>str</em>) &#8211; name identifier of the port in the PC&#8217;s OS</li>
<li><strong>baudrate</strong> (<em>str</em>) &#8211; communications speed between the XBee modules.</li>
<li><strong>stopbits</strong> (<em>int</em>) &#8211; Number of bits at the end of each message.</li>
<li><strong>parity</strong> (<em>str</em>) &#8211; Message parity. <em>None</em> by default</li>
<li><strong>timeout</strong> (<em>float</em>) &#8211; Time to wait to achieve the communication.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="uvirobot.serialcomm.SerMesProtocol.move">
<code class="descname">move</code><span class="sig-paren">(</span><em>setpoint=[0, 0]</em><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.serialcomm.SerMesProtocol.move" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a move order to the slave.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>int] setpoint</strong> (<em>[int,</em>) &#8211; List with element values values from 
0 to 255. Velocity of the UGV. First element corresponds to 
right wheels, and second element to left wheels. Values are 
rounded if decimal.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">true or false condition which confirms that the 
message was received.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="uvirobot.serialcomm.SerMesProtocol.read_message">
<code class="descname">read_message</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.serialcomm.SerMesProtocol.read_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a message using the serial message protocol.</p>
<p>When the message is read, check the auxiliary bytes for 
assuring the consistence of the message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Returns bool Rx_OK:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">is 0 if an error ocurred.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returns str fun_code:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">non decodified hex-data corresponding to 
the function code given by the slave.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">Returns str data:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body">non decodified hex-data corresponding to the 
data given by slave.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Returns int length:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">size of the main data, in bytes.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="uvirobot.serialcomm.SerMesProtocol.ready">
<code class="descname">ready</code><span class="sig-paren">(</span><em>tries=10</em><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.serialcomm.SerMesProtocol.ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the communication channel is ready.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tries</strong> (<em>int</em>) &#8211; number of tries before exiting and raising an 
error.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">returns a true or false condition which confirms that 
the message was received.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="uvirobot.serialcomm.SerMesProtocol.send_message">
<code class="descname">send_message</code><span class="sig-paren">(</span><em>fun_code</em>, <em>data=''</em>, <em>send_delay=0.01</em><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.serialcomm.SerMesProtocol.send_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message formatted with the defined protocol.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fun_code</strong> (<em>str</em>) &#8211; function code of the command that is going 
to be sent.</li>
<li><strong>length</strong> (<em>str</em>) &#8211; Size of the DATA field in bytes.</li>
<li><strong>data</strong> (<em>str</em>) &#8211; DATA field of the message.</li>
<li><strong>send_delay</strong> (<em>float</em>) &#8211; Delay time to wait between sent bytes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-uvirobot.speedtransform">
<span id="speedtransform-py"></span><h2>speedtransform.py<a class="headerlink" href="#module-uvirobot.speedtransform" title="Permalink to this headline">¶</a></h2>
<p>Module with a class that deals with the formatting of speed values.</p>
<p>The instances of the <em>Speed</em> class represent the speeds of 2WD UGVs, 
and the attributes and operations related to them.</p>
<hr class="docutils" />
<dl class="class">
<dt id="uvirobot.speedtransform.Speed">
<em class="property">class </em><code class="descclassname">uvirobot.speedtransform.</code><code class="descname">Speed</code><span class="sig-paren">(</span><em>speed=[0, 0], min_value=-0.3, max_value=0.3, spd_format='linear_angular', scale='linear'</em><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.speedtransform.Speed" title="Permalink to this definition">¶</a></dt>
<dd><p>This class manages the speed values compatible with a 2WD vehicle.</p>
<p>The default speed format is <em>linear_angular</em>. This means that the 
speed is a 2-values array, whose items corresponds to the linear 
and angular speed respectively.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>float] speed</strong> (<em>[float,</em>) &#8211; speed values of the vehicle. If the 
format is <em>linear_angular</em>, it represents the linear and angular 
speeds of the vehicle. If the format is <em>2_wheel_drive</em>, it 
represents the velocities of the right and left wheels of the 
vehicle, respectively.</li>
<li><strong>min_value</strong> (<em>float</em>) &#8211; Minimum value of the <em>speed</em> attribute</li>
<li><strong>max_value</strong> (<em>float</em>) &#8211; Maximum value of the <em>speed</em> attribute</li>
<li><strong>spd_format</strong> (<em>str</em>) &#8211; Format of the speed. Possible values are 
stored in the tuple <em>Speed.SPEEDFORMATS</em>.</li>
<li><strong>scale</strong> (<em>str</em>) &#8211; Scaling of the speed. Possible values are 
stored in the tuple <em>Speed.SPEEDSCALES</em>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="uvirobot.speedtransform.Speed.check_bounds">
<code class="descname">check_bounds</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.speedtransform.Speed.check_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the speed values are inside valid bounds.</p>
<p>If the value is out of bounds, it is rounded to the nearest 
limit.</p>
</dd></dl>

<dl class="method">
<dt id="uvirobot.speedtransform.Speed.get_2WD_speeds">
<code class="descname">get_2WD_speeds</code><span class="sig-paren">(</span><em>rho=0.065, L=0.15, wheels_modifiers=[1, 1]</em><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.speedtransform.Speed.get_2WD_speeds" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain two speeds components, one for each side of the vehicle.</p>
<p>It calculates the speed component for each side, when  the
linear and angular velocities of the vehicle are given.
The method also changes the maximum and minimum values.</p>
<p>This calculus responds to the dynamics system proposed on: 
<a class="reference external" href="http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=5674957">http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=5674957</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>rho</strong> (<em>float</em>) &#8211; Parameter of the dynamic model, which 
represents the vehicle&#8217;s wheels diameter, in meters.</li>
<li><strong>L</strong> (<em>float</em>) &#8211; Parameter of the dynamic model, which represents
the distance between the driving wheels of the vehicle.</li>
<li><strong>float] wheels_modifiers</strong> (<em>[float,</em>) &#8211; It is intended to adjust
the error between the ideal model and the real system. Thus, it
corrects the performance difference between the 2 wheels. It is
recommended to tune this values by testing them on the real 
vehicle.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">output value for the right and left wheels. Maximum 
and minimum limits are modified proportionally to rho.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.array([V_Right, V_Left])</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="uvirobot.speedtransform.Speed.get_format">
<code class="descname">get_format</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.speedtransform.Speed.get_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the format value.</p>
</dd></dl>

<dl class="method">
<dt id="uvirobot.speedtransform.Speed.get_max_value">
<code class="descname">get_max_value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.speedtransform.Speed.get_max_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the maximum allowed value for a linear scale.</p>
</dd></dl>

<dl class="method">
<dt id="uvirobot.speedtransform.Speed.get_min_value">
<code class="descname">get_min_value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.speedtransform.Speed.get_min_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the minimum allowed value for a linear scale.</p>
</dd></dl>

<dl class="method">
<dt id="uvirobot.speedtransform.Speed.get_scale">
<code class="descname">get_scale</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.speedtransform.Speed.get_scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the scale value.</p>
</dd></dl>

<dl class="method">
<dt id="uvirobot.speedtransform.Speed.get_speed">
<code class="descname">get_speed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.speedtransform.Speed.get_speed" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the value of the speed.</p>
</dd></dl>

<dl class="method">
<dt id="uvirobot.speedtransform.Speed.linear_transform">
<code class="descname">linear_transform</code><span class="sig-paren">(</span><em>new_min</em>, <em>new_max</em><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.speedtransform.Speed.linear_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the range of values of the speed.</p>
<p>The method converts the actual <em>speed</em> values and the limits it 
can take.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>new_min</strong> (<em>float</em>) &#8211; absolute minimum that the new speed values 
may take.</li>
<li><strong>new_max</strong> (<em>float</em>) &#8211; absolute maximum that the new speed values 
may take.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="uvirobot.speedtransform.Speed.nonlinear_transform">
<code class="descname">nonlinear_transform</code><span class="sig-paren">(</span><em>min_A=30</em>, <em>max_A=100</em>, <em>min_B=160</em>, <em>max_B=220</em>, <em>scale_zero=127</em><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.speedtransform.Speed.nonlinear_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a non-linear conversion of speed values.</p>
<p>Intended to avoid useless points near to 0 on a real UGV, it
translates the input speeds to useful segments.</p>
<p>The previous scale has to be linear.</p>
<p>A characterization of the UGV should be done before performing 
this rescalation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Transformation:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>The values range is divided into 2 equal segments (segment A and
segment B). If the value belongs to segment A, it will be 
rescalated between min_A and max_A values. On the contrary, if 
it belongs to segment B it is rescalated between min_B and 
max_B. The mid value is assigned to 0.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>          <span class="n">min_value</span>    <span class="n">zero_value</span>    <span class="n">max_value</span>
              <span class="o">|------------|------------|</span>         
               <span class="n">segment</span> <span class="n">A</span>      <span class="n">segment</span> <span class="n">B</span>               

<span class="n">min_A</span>             <span class="n">max_A</span>         <span class="n">min_B</span>             <span class="n">max_B</span>
  <span class="o">|-----------------|</span>      <span class="o">|</span>      <span class="o">|-----------------|</span>
                       <span class="n">scale_zero</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>value</strong> (<em>int/float</em>) &#8211; value to be transformed into the 
nonlinear space.</li>
<li><strong>[min_A, max_A, min_B, max_B]</strong> (<em>int/float</em>) &#8211; <p>limit values for 
the segments A and B. The transformed values will belong to one
of the 2 intervals and 0.</p>
<blockquote>
<div><em>min_A &lt; max_A &lt; scale_zero &lt; min_B &lt; max_B</em></div></blockquote>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="uvirobot.speedtransform.Speed.set_speed">
<code class="descname">set_speed</code><span class="sig-paren">(</span><em>speed</em>, <em>speed_format</em>, <em>speed_scale='linear'</em><span class="sig-paren">)</span><a class="headerlink" href="#uvirobot.speedtransform.Speed.set_speed" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a new speed value.</p>
<p>Input speed must be a 2-values list or tupple. If out of bounds, 
it will be rounded to the nearest limit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>float/int] speed</strong> (<em>[float/int,</em>) &#8211; new values for the <em>speed</em> 
attribute. Depending on the format, the values may refer to the
linear and angular values, or to the left and right wheels 
speeds.</li>
<li><strong>speed_format</strong> (<em>str</em>) &#8211; The format of the new speed. It has to 
be a valid one (Check the attribute <em>Speed.SPEEDFORMATS</em>)</li>
<li><strong>speed_scale</strong> (<em>str</em>) &#8211; The scale of the new speed. It has to 
be a valid one (Check the attribute <em>Speed.SPEEDSCALES</em>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Starting.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Uvirobot package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-uvirobot.messenger">messenger.py</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#speed-formatting">Speed formatting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-uvirobot.controller">controller.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-uvirobot.plotter">plotter.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-uvirobot.robot">robot.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-uvirobot.serialcomm">serialcomm.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-uvirobot.speedtransform">speedtransform.py</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="uvisensor.html">Uvisensor package</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hardware.html">Hardware design</a></li>
<li class="toctree-l1"><a class="reference internal" href="Arduino.html">Arduino controller</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="Starting.html" title="Getting Started"
              >previous</a> |
            <a href="uvisensor.html" title="The uvisensor package"
              >next</a> |
            <a href="py-modindex.html" title="Python Module Index"
              >modules</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/uvirobot.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Javier Lopez-Randulfe.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>